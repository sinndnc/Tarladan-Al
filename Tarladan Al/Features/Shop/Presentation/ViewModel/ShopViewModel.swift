//
//  ShopViewModel.swift
//  Tarladan Al
//
//  Created by Sinan Din√ß on 8/7/25.
//
import Foundation
import Combine

class ShopViewModel: ObservableObject {
    
    @Published var showScan = false
    @Published var showCart = false
    @Published var isLoading = false
    @Published var showFilters = false
    @Published var errorMessage: String?
    
    @Published var viewMode: ViewMode = .grid
    @Published var sortOption: SortOption = .popularity
    
    @Published var searchText = ""
    
    @Published var quickActions: [QuickAction] = []
    @Published var categories: [ProductCategory] = []
    @Published var selectedCategory: ProductCategory?
    
    @Published var products: [Product] = []
    @Published var filteredProducts: [Product] = []
    
    @Published var featuredTitle = "üå± Yaz Sezonu √ñzel"
    @Published var featuredDescription = "Taze yaz sebzeleri ve meyvelerinde %30'a varan indirimler"
    @Published var showFeaturedBanner = true
    
    private var currentUser: User?
    private var cancellables = Set<AnyCancellable>()
    
    func setUser(_ user: User?) {
        self.currentUser = user
    }
    
    @Injected private var addToFavoritesUseCase: AddToFavoritesUseCaseProtocol
    @Injected private var listenProductsUseCase : ListenProductsUseCaseProtocol
    
    init() {
        self.loadProducts()
        self.quickActions = setupQuickActions()
        self.categories =  setupCategories()
    }
    
    var sortOptions: [SortOption] {
        SortOption.allCases
    }
    
    func toggleCart() {
        showCart.toggle()
    }
    
    func loadProducts() {
        listenProductsUseCase.execute()
            .receive(on: DispatchQueue.main)
            .sink(
                receiveCompletion: { completion in
                    switch completion {
                    case .finished:
                        Logger.log("‚úÖ VIEW MODEL: Completed successfully")
                    case .failure(let error):
                        Logger.log("‚ùå VIEW MODEL: Error: \(error)")
                    }
                },
                receiveValue: { [weak self] products in
                    self?.products = products
                }
            )
            .store(in: &cancellables)
    }
    
    func filteredProducts(category: ProductCategory?, searchText: String) -> [Product] {
        var filtered = products
        
        // Kategori filtresi
        if let category = category {
            filtered = filtered.filter { $0.categoryName == category.name }
        }
        
        // Arama filtresi
        if !searchText.isEmpty {
            filtered = filtered.filter { product in
                product.title.localizedCaseInsensitiveContains(searchText) ||
                product.description.localizedCaseInsensitiveContains(searchText) ||
                product.farmerName.localizedCaseInsensitiveContains(searchText) ||
                product.locationName.localizedCaseInsensitiveContains(searchText)
            }
        }
        
        return Array(filtered.prefix(10))
    }
    
    // Kategorilere g√∂re √ºr√ºn sayƒ±sƒ±
    func productCount(for category: ProductCategory) -> Int {
        products.filter { $0.categoryName == category.name }.count
    }
    
    private func handleQuickAction(_ action: QuickActionType) {
        // Implement quick action logic
        switch action {
        case .popularity:
            // Navigate to popular products
            break
        case .discount:
            // Navigate to discounted products
            break
        case .newProducts:
            // Navigate to new products
            break
        case .fastDelivery:
            // Navigate to fast delivery products
            break
        }
    }
    
    func setViewMode(_ mode: ViewMode) {
        viewMode = mode
    }
    
    func addToFavorites(for productId: String){
        guard let currentUser = currentUser,
              let id = currentUser.id else {
            return
        }
        addToFavoritesUseCase.execute(id: id, productId: productId)
            .receive(on: DispatchQueue.main)
            .sink(
                receiveCompletion: { completion in
                    switch completion {
                    case .finished:
                        Logger.log("‚úÖ VIEW MODEL: Completed successfully")
                    case .failure(let error):
                        Logger.log("‚ùå VIEW MODEL: Error: \(error)")
                    }
                },
                receiveValue: { _ in
                }
            )
            .store(in: &cancellables)
    }
}

extension ShopViewModel{
    
    static let shared = ShopViewModel()
    
    func getCategory(by id: String) -> ProductCategory? {
        return categories.first { category in
            category.subCategories.contains { $0.id.uuidString == id }
        }
    }
    
    func getSubCategory(by name: String) -> ProductSubCategory? {
        for category in categories {
            if let subCategory = category.subCategories.first(where: { $0.name == name }) {
                return subCategory
            }
        }
        return nil
    }
    
    
    func getCategoryAndSubCategory(by subCategoryId: String) -> (category: ProductCategory, subCategory: ProductSubCategory)? {
        for category in categories {
            if let subCategory = category.subCategories.first(where: { $0.id.uuidString == subCategoryId }) {
                return (category, subCategory)
            }
        }
        return nil
    }
    
    private func setupQuickActions() -> [QuickAction] {
        return [
            QuickAction(
                icon: "star.fill",
                title: "En Pop√ºler",
                subtitle: "150+ √ºr√ºn",
                color: .yellow
            ) { [weak self] in
                self?.handleQuickAction(.popularity)
            },
            QuickAction(
                icon: "tag.fill",
                title: "ƒ∞ndirimli",
                subtitle: "45 √ºr√ºn",
                color: .red
            ) { [weak self] in
                self?.handleQuickAction(.discount)
            },
            QuickAction(
                icon: "leaf.fill",
                title: "Yeni √úr√ºnler",
                subtitle: "28 √ºr√ºn",
                color: .green
            ) { [weak self] in
                self?.handleQuickAction(.newProducts)
            },
            QuickAction(
                icon: "clock.fill",
                title: "Hƒ±zlƒ± Teslimat",
                subtitle: "2 saat i√ßinde",
                color: .blue
            ) { [weak self] in
                self?.handleQuickAction(.fastDelivery)
            }
        ]
    }
    
    func setupCategories() -> [ProductCategory] {
        return [
            ProductCategory(
                name: "Meyveler",
                icon: "üçé",
                colorHex: "#FF6B6B",
                subCategories: [
                    ProductSubCategory(
                        name: "Elma",
                        icon: "üçé",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece, .box, .basket],
                        seasonalityMonths: [9, 10, 11],
                        storageType: .refrigerated,
                        shelfLife: 60,
                        variants: ["Amasya", "Granny Smith", "Golden", "Starking", "Gala"],
                        keywords: ["elma", "apple", "kƒ±rmƒ±zƒ± elma", "ye≈üil elma"]
                    ),
                    ProductSubCategory(
                        name: "Armut",
                        icon: "üçê",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece, .box, .basket],
                        seasonalityMonths: [8, 9, 10],
                        storageType: .refrigerated,
                        shelfLife: 45,
                        variants: ["Ankara", "Williams", "Deveci", "Santa Maria"],
                        keywords: ["armut", "pear"]
                    ),
                    ProductSubCategory(
                        name: "√úz√ºm",
                        icon: "üçá",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bunch, .box, .basket],
                        seasonalityMonths: [8, 9, 10],
                        storageType: .refrigerated,
                        shelfLife: 14,
                        variants: ["Sultani", "Cardinal", "Alphonse", "Razakƒ±"],
                        keywords: ["√ºz√ºm", "grape", "asma"]
                    ),
                    ProductSubCategory(
                        name: "Portakal",
                        icon: "üçä",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece, .box, .basket],
                        seasonalityMonths: [11, 12, 1, 2, 3],
                        storageType: .roomTemperature,
                        shelfLife: 21,
                        variants: ["Valencia", "Jaffa", "Washington Navel"],
                        keywords: ["portakal", "orange", "turuncu"]
                    ),
                    ProductSubCategory(
                        name: "Limon",
                        icon: "üçã",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece, .box],
                        seasonalityMonths: [10, 11, 12, 1, 2, 3, 4],
                        storageType: .roomTemperature,
                        shelfLife: 30,
                        variants: ["Enterdonat", "Lamas", "Meyer"],
                        keywords: ["limon", "lemon", "sarƒ±"]
                    ),
                    ProductSubCategory(
                        name: "Muz",
                        icon: "üçå",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece, .bunch],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .roomTemperature,
                        shelfLife: 7,
                        variants: ["Cavendish", "Grand Nain"],
                        keywords: ["muz", "banana"]
                    ),
                    ProductSubCategory(
                        name: "√áilek",
                        icon: "üçì",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.basket, .package],
                        seasonalityMonths: [4, 5, 6],
                        storageType: .refrigerated,
                        shelfLife: 5,
                        variants: ["Festival", "Albion", "Camarosa"],
                        keywords: ["√ßilek", "strawberry"]
                    ),
                    ProductSubCategory(
                        name: "≈ûeftali",
                        icon: "üçë",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece, .box, .basket],
                        seasonalityMonths: [6, 7, 8],
                        storageType: .refrigerated,
                        shelfLife: 10,
                        variants: ["J.H. Hale", "Elberta", "Redhaven"],
                        keywords: ["≈üeftali", "peach"]
                    ),
                    ProductSubCategory(
                        name: "Kayƒ±sƒ±",
                        icon: "üß°",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece, .box, .basket],
                        seasonalityMonths: [6, 7],
                        storageType: .refrigerated,
                        shelfLife: 7,
                        variants: ["Hacƒ±haliloƒülu", "≈ûalak", "Kabaa≈üƒ±"],
                        keywords: ["kayƒ±sƒ±", "apricot"]
                    ),
                    ProductSubCategory(
                        name: "Kiraz",
                        icon: "üçí",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.basket, .box],
                        seasonalityMonths: [5, 6, 7],
                        storageType: .refrigerated,
                        shelfLife: 7,
                        variants: ["Napoleon", "Van", "Ziraat 0900"],
                        keywords: ["kiraz", "cherry"]
                    )
                ],
                description: "Taze meyveler ve meyve √ºr√ºnleri"
            ),
            
            // SEBZE KATEGORƒ∞Sƒ∞
            ProductCategory(
                name: "Sebzeler",
                icon: "ü•ï",
                colorHex: "#4ECDC4",
                subCategories: [
                    ProductSubCategory(
                        name: "Domates",
                        icon: "üçÖ",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece, .box, .basket],
                        seasonalityMonths: [5, 6, 7, 8, 9],
                        storageType: .roomTemperature,
                        shelfLife: 10,
                        variants: ["Beef", "Cherry", "San Marzano", "Roma"],
                        keywords: ["domates", "tomato", "kƒ±rmƒ±zƒ±"]
                    ),
                    ProductSubCategory(
                        name: "Salatalƒ±k",
                        icon: "ü•í",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece, .box],
                        seasonalityMonths: [5, 6, 7, 8, 9],
                        storageType: .refrigerated,
                        shelfLife: 14,
                        variants: ["Sera", "A√ßƒ±k Alan", "Korni≈üon"],
                        keywords: ["salatalƒ±k", "cucumber", "hƒ±yar"]
                    ),
                    ProductSubCategory(
                        name: "Biber",
                        icon: "üå∂Ô∏è",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece],
                        seasonalityMonths: [6, 7, 8, 9],
                        storageType: .refrigerated,
                        shelfLife: 10,
                        variants: ["Tatlƒ± Biber", "Acƒ± Biber", "Kapya", "Charleston"],
                        keywords: ["biber", "pepper", "acƒ±", "tatlƒ±"]
                    ),
                    ProductSubCategory(
                        name: "Soƒüan",
                        icon: "üßÖ",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece, .bag],
                        seasonalityMonths: [7, 8, 9],
                        storageType: .dryPlace,
                        shelfLife: 120,
                        variants: ["Kƒ±rmƒ±zƒ±", "Beyaz", "Yalova"],
                        keywords: ["soƒüan", "onion"]
                    ),
                    ProductSubCategory(
                        name: "Patates",
                        icon: "ü•î",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bag],
                        seasonalityMonths: [8, 9, 10],
                        storageType: .dryPlace,
                        shelfLife: 90,
                        variants: ["Agria", "Granola", "Marabel"],
                        keywords: ["patates", "potato"]
                    ),
                    ProductSubCategory(
                        name: "Havu√ß",
                        icon: "ü•ï",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bunch, .bag],
                        seasonalityMonths: [9, 10, 11],
                        storageType: .refrigerated,
                        shelfLife: 30,
                        variants: ["Nantes", "Chantenay", "Baby Havu√ß"],
                        keywords: ["havu√ß", "carrot", "turp"]
                    ),
                    ProductSubCategory(
                        name: "Marul",
                        icon: "ü•¨",
                        defaultUnit: .piece,
                        alternativeUnits: [.kilogram, .bunch],
                        seasonalityMonths: [4, 5, 9, 10, 11],
                        storageType: .refrigerated,
                        shelfLife: 7,
                        variants: ["Kƒ±vƒ±rcƒ±k", "Iceberg", "Romen"],
                        keywords: ["marul", "lettuce", "salata"]
                    ),
                    ProductSubCategory(
                        name: "Ispanak",
                        icon: "ü•¨",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bunch, .package],
                        seasonalityMonths: [10, 11, 12, 1, 2, 3, 4],
                        storageType: .refrigerated,
                        shelfLife: 5,
                        variants: ["Kƒ±≈ü", "Yaz"],
                        keywords: ["ƒ±spanak", "spinach"]
                    ),
                    ProductSubCategory(
                        name: "Kabak",
                        icon: "ü•í",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece],
                        seasonalityMonths: [6, 7, 8, 9],
                        storageType: .roomTemperature,
                        shelfLife: 14,
                        variants: ["Sakƒ±z", "Bal", "Acorn"],
                        keywords: ["kabak", "zucchini", "squash"]
                    ),
                    ProductSubCategory(
                        name: "Patlƒ±can",
                        icon: "üçÜ",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece],
                        seasonalityMonths: [6, 7, 8, 9],
                        storageType: .roomTemperature,
                        shelfLife: 7,
                        variants: ["Kemer", "Bostan", "Japonya"],
                        keywords: ["patlƒ±can", "eggplant", "aubergine"]
                    )
                ],
                description: "Taze sebzeler ve yapraklƒ± ye≈üillikler"
            ),
            
            // TAHILƒ∞LER KATEGORƒ∞Sƒ∞
            ProductCategory(
                name: "Tahƒ±llar & Baklagiller",
                icon: "üåæ",
                colorHex: "#F7DC6F",
                subCategories: [
                    ProductSubCategory(
                        name: "Buƒüday",
                        icon: "üåæ",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bag, .ton],
                        seasonalityMonths: [7, 8],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Ekmeklik", "Makarnalƒ±k", "Durum"],
                        keywords: ["buƒüday", "wheat", "tahƒ±l"]
                    ),
                    ProductSubCategory(
                        name: "Arpa",
                        icon: "üåæ",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bag, .ton],
                        seasonalityMonths: [6, 7],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Yem", "Malt", "ƒ∞nsan"],
                        keywords: ["arpa", "barley"]
                    ),
                    ProductSubCategory(
                        name: "Mƒ±sƒ±r",
                        icon: "üåΩ",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece, .bag, .ton],
                        seasonalityMonths: [8, 9, 10],
                        storageType: .dryPlace,
                        shelfLife: 300,
                        variants: ["At Di≈üi", "≈ûeker Mƒ±sƒ±rƒ±", "Pop Corn"],
                        keywords: ["mƒ±sƒ±r", "corn", "ko√ßan"]
                    ),
                    ProductSubCategory(
                        name: "Pirin√ß",
                        icon: "üçö",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bag],
                        seasonalityMonths: [9, 10],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Baldo", "Osmancƒ±k", "Kƒ±rmƒ±zƒ±"],
                        keywords: ["pirin√ß", "rice", "√ßeltik"]
                    ),
                    ProductSubCategory(
                        name: "Nohut",
                        icon: "üü°",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bag],
                        seasonalityMonths: [7, 8],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["ƒ∞ri", "Orta", "Ufak"],
                        keywords: ["nohut", "chickpea", "garbanzo"]
                    ),
                    ProductSubCategory(
                        name: "Mercimek",
                        icon: "üî¥",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bag],
                        seasonalityMonths: [7, 8],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Kƒ±rmƒ±zƒ±", "Ye≈üil", "Siyah"],
                        keywords: ["mercimek", "lentil"]
                    ),
                    ProductSubCategory(
                        name: "Fasulye",
                        icon: "‚ö™",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bag],
                        seasonalityMonths: [8, 9],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Dermason", "Horoz", "Barbunya"],
                        keywords: ["fasulye", "bean", "b√∂r√ºlce"]
                    )
                ],
                description: "Tahƒ±llar, baklagiller ve hububat √ºr√ºnleri"
            ),
            
            // S√úT √úR√úNLERƒ∞ KATEGORƒ∞Sƒ∞
            ProductCategory(
                name: "S√ºt √úr√ºnleri",
                icon: "ü•õ",
                colorHex: "#AED6F1",
                subCategories: [
                    ProductSubCategory(
                        name: "ƒ∞nek S√ºt√º",
                        icon: "ü•õ",
                        defaultUnit: .liter,
                        alternativeUnits: [.bottle],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .refrigerated,
                        shelfLife: 3,
                        variants: ["Tam Yaƒülƒ±", "Yarƒ±m Yaƒülƒ±", "Yaƒüsƒ±z"],
                        keywords: ["s√ºt", "milk", "inek"]
                    ),
                    ProductSubCategory(
                        name: "Ke√ßi S√ºt√º",
                        icon: "üêê",
                        defaultUnit: .liter,
                        alternativeUnits: [.bottle],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .refrigerated,
                        shelfLife: 3,
                        variants: ["√áiƒü", "Past√∂rize"],
                        keywords: ["ke√ßi s√ºt√º", "goat milk"]
                    ),
                    ProductSubCategory(
                        name: "Yoƒüurt",
                        icon: "ü•õ",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.jar, .package],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .refrigerated,
                        shelfLife: 7,
                        variants: ["S√ºzme", "Krem", "Meyveli"],
                        keywords: ["yoƒüurt", "yogurt"]
                    ),
                    ProductSubCategory(
                        name: "Peynir",
                        icon: "üßÄ",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece, .package],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .refrigerated,
                        shelfLife: 30,
                        variants: ["Beyaz", "Ka≈üar", "Tulum", "Lor"],
                        keywords: ["peynir", "cheese"]
                    ),
                    ProductSubCategory(
                        name: "Tereyaƒüƒ±",
                        icon: "üßà",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.package],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .refrigerated,
                        shelfLife: 45,
                        variants: ["Tuzsuz", "Tuzlu", "√áiftlik"],
                        keywords: ["tereyaƒüƒ±", "butter"]
                    ),
                    ProductSubCategory(
                        name: "Kaymak",
                        icon: "üçØ",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.jar, .package],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .refrigerated,
                        shelfLife: 10,
                        variants: ["K√∂y", "Fabrika"],
                        keywords: ["kaymak", "cream", "krema"]
                    ),
                    ProductSubCategory(
                        name: "Yumurta",
                        icon: "ü•ö",
                        defaultUnit: .piece,
                        alternativeUnits: [.dozen, .package],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .refrigerated,
                        shelfLife: 28,
                        variants: ["Tavuk", "K√∂y", "Organik"],
                        keywords: ["yumurta", "egg"]
                    )
                ],
                description: "S√ºt ve s√ºt √ºr√ºnleri, yumurta"
            ),
            
            // ET VE SU √úR√úNLERƒ∞ KATEGORƒ∞Sƒ∞
            ProductCategory(
                name: "Et & Su √úr√ºnleri",
                icon: "üçñ",
                colorHex: "#E8B4CB",
                subCategories: [
                    ProductSubCategory(
                        name: "Dana Eti",
                        icon: "ü•©",
                        defaultUnit: .kilogram,
                        alternativeUnits: [],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .frozen,
                        shelfLife: 180,
                        variants: ["Ku≈üba≈üƒ±", "Kƒ±yma", "Biftek", "But"],
                        keywords: ["dana", "beef", "et"]
                    ),
                    ProductSubCategory(
                        name: "Kuzu Eti",
                        icon: "üçñ",
                        defaultUnit: .kilogram,
                        alternativeUnits: [],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .frozen,
                        shelfLife: 180,
                        variants: ["Ku≈üba≈üƒ±", "Kƒ±yma", "Pirzola", "But"],
                        keywords: ["kuzu", "lamb", "et"]
                    ),
                    ProductSubCategory(
                        name: "Tavuk Eti",
                        icon: "üçó",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .frozen,
                        shelfLife: 90,
                        variants: ["B√ºt√ºn", "Par√ßa", "G√∂ƒü√ºs", "But"],
                        keywords: ["tavuk", "chicken", "pili√ß"]
                    ),
                    ProductSubCategory(
                        name: "Balƒ±k",
                        icon: "üêü",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.piece],
                        seasonalityMonths: [10, 11, 12, 1, 2, 3],
                        storageType: .frozen,
                        shelfLife: 90,
                        variants: ["√áipura", "Levrek", "Hamsi", "Alabalƒ±k"],
                        keywords: ["balƒ±k", "fish"]
                    )
                ],
                description: "Taze et ve su √ºr√ºnleri"
            ),
            
            // BAL VE ARICILIK √úR√úNLERƒ∞ KATEGORƒ∞Sƒ∞
            ProductCategory(
                name: "Bal & Arƒ±cƒ±lƒ±k",
                icon: "üçØ",
                colorHex: "#F4D03F",
                subCategories: [
                    ProductSubCategory(
                        name: "√ái√ßek Balƒ±",
                        icon: "üçØ",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.jar, .bottle],
                        seasonalityMonths: [5, 6, 7, 8],
                        storageType: .roomTemperature,
                        shelfLife: 730,
                        variants: ["Akasya", "Kestane", "√áam", "Lavanta"],
                        keywords: ["bal", "honey", "√ßi√ßek"]
                    ),
                    ProductSubCategory(
                        name: "Polen",
                        icon: "üåº",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.jar, .package],
                        seasonalityMonths: [4, 5, 6],
                        storageType: .refrigerated,
                        shelfLife: 365,
                        variants: ["Ham", "Kurutulmu≈ü"],
                        keywords: ["polen", "pollen", "arƒ±"]
                    ),
                    ProductSubCategory(
                        name: "Arƒ± S√ºt√º",
                        icon: "ü•õ",
                        defaultUnit: .gram,
                        alternativeUnits: [.jar],
                        seasonalityMonths: [5, 6, 7],
                        storageType: .frozen,
                        shelfLife: 365,
                        variants: ["Taze", "Dondurulmu≈ü"],
                        keywords: ["arƒ± s√ºt√º", "royal jelly"]
                    ),
                    ProductSubCategory(
                        name: "Propolis",
                        icon: "üçØ",
                        defaultUnit: .gram,
                        alternativeUnits: [.bottle, .package],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .roomTemperature,
                        shelfLife: 1095,
                        variants: ["Ham", "Ekstrakt", "Kaps√ºl"],
                        keywords: ["propolis", "arƒ± tutkalƒ±"]
                    )
                ],
                description: "Bal ve arƒ±cƒ±lƒ±k √ºr√ºnleri"
            ),
            
            // BAHARATLAR VE √áE≈ûNƒ∞LER KATEGORƒ∞Sƒ∞
            ProductCategory(
                name: "Baharat & √áe≈üniler",
                icon: "üå∂Ô∏è",
                colorHex: "#DC7633",
                subCategories: [
                    ProductSubCategory(
                        name: "Kƒ±rmƒ±zƒ± Biber",
                        icon: "üå∂Ô∏è",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.package],
                        seasonalityMonths: [9, 10],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Toz", "Pul", "ƒ∞sot"],
                        keywords: ["kƒ±rmƒ±zƒ± biber", "paprika", "baharat"]
                    ),
                    ProductSubCategory(
                        name: "Sumak",
                        icon: "üî¥",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.package],
                        seasonalityMonths: [8, 9],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Toz", "Kƒ±rma"],
                        keywords: ["sumak", "sumac"]
                    ),
                    ProductSubCategory(
                        name: "Kekik",
                        icon: "üåø",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bunch, .package],
                        seasonalityMonths: [6, 7, 8],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Kurutulmu≈ü", "Taze"],
                        keywords: ["kekik", "thyme", "oregano"]
                    ),
                    ProductSubCategory(
                        name: "Nane",
                        icon: "üåø",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bunch, .package],
                        seasonalityMonths: [5, 6, 7, 8],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Kurutulmu≈ü", "Taze"],
                        keywords: ["nane", "mint"]
                    )
                ],
                description: "Baharatlar, otlar ve √ße≈üniler"
            ),
            
            // KURU MEYVE VE KURUYEMI≈û KATEGORƒ∞Sƒ∞
            ProductCategory(
                name: "Kuru Meyve & Kuruyemi≈ü",
                icon: "ü•ú",
                colorHex: "#8E44AD",
                subCategories: [
                    ProductSubCategory(
                        name: "Ceviz",
                        icon: "ü•ú",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bag, .package],
                        seasonalityMonths: [10, 11],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["ƒ∞√ß", "Kabuklu", "Par√ßa"],
                        keywords: ["ceviz", "walnut"]
                    ),
                    ProductSubCategory(
                        name: "Fƒ±ndƒ±k",
                        icon: "üå∞",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bag, .package],
                        seasonalityMonths: [8, 9],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["ƒ∞√ß", "Kabuklu", "Kavrulmu≈ü"],
                        keywords: ["fƒ±ndƒ±k", "hazelnut"]
                    ),
                    ProductSubCategory(
                        name: "Badem",
                        icon: "ü•ú",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bag, .package],
                        seasonalityMonths: [8, 9],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["ƒ∞√ß", "Kabuklu", "Dilimli"],
                        keywords: ["badem", "almond"]
                    ),
                    ProductSubCategory(
                        name: "Antep Fƒ±stƒ±ƒüƒ±",
                        icon: "ü•ú",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.package],
                        seasonalityMonths: [9, 10],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["ƒ∞√ß", "Kabuklu", "Tuzlu"],
                        keywords: ["antep fƒ±stƒ±ƒüƒ±", "pistachio"]
                    ),
                    ProductSubCategory(
                        name: "Kuru Kayƒ±sƒ±",
                        icon: "üß°",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.package],
                        seasonalityMonths: [7, 8],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["√áekirdekli", "√áekirdeksiz", "Organik"],
                        keywords: ["kuru kayƒ±sƒ±", "dried apricot"]
                    ),
                    ProductSubCategory(
                        name: "Kuru ƒ∞ncir",
                        icon: "üü§",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.package],
                        seasonalityMonths: [8, 9],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Sarƒ±lop", "Bursa Siyahƒ±"],
                        keywords: ["kuru incir", "dried fig"]
                    ),
                    ProductSubCategory(
                        name: "Kuru √úz√ºm",
                        icon: "üçá",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.package],
                        seasonalityMonths: [9, 10],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Sultani", "√áekirdekli", "√áekirdeksiz"],
                        keywords: ["kuru √ºz√ºm", "raisin", "√ºz√ºm"]
                    )
                ],
                description: "Kuru meyveler ve kuruyemi≈üler"
            ),
            
            // ZEYTƒ∞N VE ZEYTƒ∞NYAƒûI KATEGORƒ∞Sƒ∞
            ProductCategory(
                name: "Zeytin & Zeytinyaƒüƒ±",
                icon: "ü´í",
                colorHex: "#27AE60",
                subCategories: [
                    ProductSubCategory(
                        name: "Siyah Zeytin",
                        icon: "‚ö´",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.jar, .package],
                        seasonalityMonths: [11, 12, 1],
                        storageType: .roomTemperature,
                        shelfLife: 180,
                        variants: ["Gemlik", "Ayvalƒ±k", "Edremit"],
                        keywords: ["siyah zeytin", "black olive"]
                    ),
                    ProductSubCategory(
                        name: "Ye≈üil Zeytin",
                        icon: "ü´í",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.jar, .package],
                        seasonalityMonths: [9, 10, 11],
                        storageType: .roomTemperature,
                        shelfLife: 180,
                        variants: ["Kƒ±rma", "B√ºt√ºn", "Dolma"],
                        keywords: ["ye≈üil zeytin", "green olive"]
                    ),
                    ProductSubCategory(
                        name: "Zeytinyaƒüƒ±",
                        icon: "üõ¢Ô∏è",
                        defaultUnit: .liter,
                        alternativeUnits: [.bottle],
                        seasonalityMonths: [11, 12, 1],
                        storageType: .roomTemperature,
                        shelfLife: 730,
                        variants: ["Soƒüuk Sƒ±kƒ±m", "Birinci", "Riviera"],
                        keywords: ["zeytinyaƒüƒ±", "olive oil", "yaƒü"]
                    ),
                    ProductSubCategory(
                        name: "Zeytin Ezmesi",
                        icon: "ü´í",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.jar],
                        seasonalityMonths: [11, 12, 1],
                        storageType: .refrigerated,
                        shelfLife: 90,
                        variants: ["Siyah", "Ye≈üil", "Karƒ±≈üƒ±k"],
                        keywords: ["zeytin ezmesi", "olive paste", "tapenade"]
                    )
                ],
                description: "Zeytin ve zeytinyaƒüƒ± √ºr√ºnleri"
            ),
            
            // ≈ûARAPCILIK VE ƒ∞√áECEKLER KATEGORƒ∞Sƒ∞
            ProductCategory(
                name: "ƒ∞√ßecekler & ≈ûƒ±ra",
                icon: "üßÉ",
                colorHex: "#9B59B6",
                subCategories: [
                    ProductSubCategory(
                        name: "Elma ≈ûƒ±rasƒ±",
                        icon: "üßÉ",
                        defaultUnit: .liter,
                        alternativeUnits: [.bottle],
                        seasonalityMonths: [9, 10, 11],
                        storageType: .refrigerated,
                        shelfLife: 30,
                        variants: ["Doƒüal", "≈ûekersiz", "Organik"],
                        keywords: ["elma ≈üƒ±rasƒ±", "apple juice"]
                    ),
                    ProductSubCategory(
                        name: "√úz√ºm ≈ûƒ±rasƒ±",
                        icon: "üçá",
                        defaultUnit: .liter,
                        alternativeUnits: [.bottle],
                        seasonalityMonths: [8, 9, 10],
                        storageType: .refrigerated,
                        shelfLife: 30,
                        variants: ["Kƒ±rmƒ±zƒ±", "Beyaz", "Pembe"],
                        keywords: ["√ºz√ºm ≈üƒ±rasƒ±", "grape juice"]
                    ),
                    ProductSubCategory(
                        name: "Nar Ek≈üisi",
                        icon: "üç∑",
                        defaultUnit: .liter,
                        alternativeUnits: [.bottle],
                        seasonalityMonths: [10, 11],
                        storageType: .roomTemperature,
                        shelfLife: 365,
                        variants: ["Konsantre", "Doƒüal"],
                        keywords: ["nar ek≈üisi", "pomegranate molasses"]
                    ),
                    ProductSubCategory(
                        name: "≈ûalgam Suyu",
                        icon: "ü•§",
                        defaultUnit: .liter,
                        alternativeUnits: [.bottle],
                        seasonalityMonths: [10, 11, 12, 1, 2],
                        storageType: .refrigerated,
                        shelfLife: 60,
                        variants: ["Acƒ±", "Acƒ±sƒ±z", "Turp"],
                        keywords: ["≈üalgam", "turnip juice"]
                    )
                ],
                description: "Doƒüal meyve sularƒ± ve geleneksel i√ßecekler"
            ),
            
            // MANTAR KATEGORƒ∞Sƒ∞
            ProductCategory(
                name: "Mantarlar",
                icon: "üçÑ",
                colorHex: "#795548",
                subCategories: [
                    ProductSubCategory(
                        name: "K√ºlt√ºr Mantarƒ±",
                        icon: "üçÑ‚Äçüü´",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.package],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .refrigerated,
                        shelfLife: 7,
                        variants: ["Beyaz", "Kahverengi"],
                        keywords: ["mantar", "mushroom", "k√ºlt√ºr"]
                    ),
                    ProductSubCategory(
                        name: "ƒ∞stiridye Mantarƒ±",
                        icon: "üçÑ",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.package],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .refrigerated,
                        shelfLife: 5,
                        variants: ["Beyaz", "Sarƒ±", "Pembe"],
                        keywords: ["istiridye mantarƒ±", "oyster mushroom"]
                    ),
                    ProductSubCategory(
                        name: "Shiitake Mantarƒ±",
                        icon: "üçÑ‚Äçüü´",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.package],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .refrigerated,
                        shelfLife: 10,
                        variants: ["Taze", "Kurutulmu≈ü"],
                        keywords: ["shiitake", "japanese mushroom"]
                    ),
                    ProductSubCategory(
                        name: "Yabani Mantar",
                        icon: "üçÑ",
                        defaultUnit: .kilogram,
                        alternativeUnits: [],
                        seasonalityMonths: [4, 5, 10, 11],
                        storageType: .refrigerated,
                        shelfLife: 3,
                        variants: ["√áam", "Me≈üe", "Karƒ±≈üƒ±k"],
                        keywords: ["yabani mantar", "wild mushroom"]
                    )
                ],
                description: "Taze ve kurutulmu≈ü mantarlar"
            ),
            
            // √áƒ∞√áEK VE S√úS Bƒ∞TKƒ∞LERƒ∞ KATEGORƒ∞Sƒ∞
            ProductCategory(
                name: "√ái√ßek & S√ºs Bitkileri",
                icon: "üå∏",
                colorHex: "#E91E63",
                subCategories: [
                    ProductSubCategory(
                        name: "Kesme √ái√ßek",
                        icon: "üåπ",
                        defaultUnit: .piece,
                        alternativeUnits: [.bunch],
                        seasonalityMonths: [3, 4, 5, 6, 7, 8, 9, 10],
                        storageType: .refrigerated,
                        shelfLife: 7,
                        variants: ["G√ºl", "Karanfil", "Lale", "Papatya"],
                        keywords: ["√ßi√ßek", "flower", "g√ºl", "kesme"]
                    ),
                    ProductSubCategory(
                        name: "Saksƒ± √ái√ßeƒüi",
                        icon: "üå∫",
                        defaultUnit: .piece,
                        alternativeUnits: [],
                        seasonalityMonths: [3, 4, 5, 6, 7, 8, 9],
                        storageType: .roomTemperature,
                        shelfLife: 30,
                        variants: ["Begonva", "Petunya", "Ate≈ü √ái√ßeƒüi"],
                        keywords: ["saksƒ±", "pot", "√ßi√ßek"]
                    ),
                    ProductSubCategory(
                        name: "S√ºs Bitkisi",
                        icon: "üåø",
                        defaultUnit: .piece,
                        alternativeUnits: [],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .roomTemperature,
                        shelfLife: 365,
                        variants: ["Ficus", "Pothos", "Kau√ßuk Aƒüacƒ±"],
                        keywords: ["s√ºs bitkisi", "houseplant", "dekoratif"]
                    ),
                    ProductSubCategory(
                        name: "√ái√ßek Soƒüanƒ±",
                        icon: "üßÖ",
                        defaultUnit: .piece,
                        alternativeUnits: [.package],
                        seasonalityMonths: [9, 10, 11],
                        storageType: .dryPlace,
                        shelfLife: 180,
                        variants: ["Lale", "S√ºmb√ºl", "Nergis"],
                        keywords: ["soƒüan", "bulb", "√ßi√ßek"]
                    )
                ],
                description: "√ái√ßekler ve s√ºs bitkileri"
            ),
            
            // TIBBƒ∞ VE AROMATƒ∞K Bƒ∞TKƒ∞LER KATEGORƒ∞Sƒ∞
            ProductCategory(
                name: "Tƒ±bbi & Aromatik Bitkiler",
                icon: "üåø",
                colorHex: "#4CAF50",
                subCategories: [
                    ProductSubCategory(
                        name: "Lavanta",
                        icon: "üíú",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bunch, .package],
                        seasonalityMonths: [6, 7],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Kurutulmu≈ü", "Taze", "Yaƒüƒ±"],
                        keywords: ["lavanta", "lavender"]
                    ),
                    ProductSubCategory(
                        name: "Biberiye",
                        icon: "üåø",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bunch, .package],
                        seasonalityMonths: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Kurutulmu≈ü", "Taze"],
                        keywords: ["biberiye", "rosemary"]
                    ),
                    ProductSubCategory(
                        name: "Ada√ßayƒ±",
                        icon: "üåø",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.bunch, .package],
                        seasonalityMonths: [5, 6, 7, 8],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Kurutulmu≈ü", "Taze"],
                        keywords: ["ada√ßayƒ±", "sage"]
                    ),
                    ProductSubCategory(
                        name: "Papatya",
                        icon: "üåº",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.package],
                        seasonalityMonths: [5, 6, 7],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["Kurutulmu≈ü √ái√ßek", "Yaprak"],
                        keywords: ["papatya", "chamomile"]
                    ),
                    ProductSubCategory(
                        name: "Ihlamur",
                        icon: "üåø",
                        defaultUnit: .kilogram,
                        alternativeUnits: [.package],
                        seasonalityMonths: [6, 7],
                        storageType: .dryPlace,
                        shelfLife: 365,
                        variants: ["√ái√ßek", "Yaprak"],
                        keywords: ["ƒ±hlamur", "linden"]
                    )
                ],
                description: "≈ûifalƒ± ve aromatik bitkiler"
            )
        ]
    }
    
}
